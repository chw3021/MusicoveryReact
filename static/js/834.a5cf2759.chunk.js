"use strict";(self.webpackChunkmusicovery_front=self.webpackChunkmusicovery_front||[]).push([[834],{486:(e,s,a)=>{a.d(s,{A:()=>n});var t=a(5043),l=a(4935),i=a(6375),r=a(579);const n=e=>{let{onSelectTrack:s}=e;const{keyword:a,setKeyword:n,results:o,handleSearch:c,isPremium:d}=(0,i.A)(),[m,p]=(0,t.useState)(!1);return(0,r.jsxs)("div",{className:"music-search",children:[d,(0,r.jsxs)("form",{onSubmit:e=>{e.preventDefault(),c(),p(!0)},children:[" ",(0,r.jsx)("input",{className:"music-search-input",type:"text",value:a,onChange:e=>n(e.target.value),placeholder:"\uc74c\uc545 \uac80\uc0c9"}),(0,r.jsx)("button",{type:"submit",children:"\ud83d\udd0e"})]}),(0,r.jsx)("div",{className:"music-search-results",children:m||0!==o.length?o.map(((e,a)=>(0,r.jsx)("div",{onClick:()=>s(e),children:(0,r.jsx)(l.A,{track:e,isPremium:d})},e.id))):(0,r.jsx)("div",{className:"music-search-placeholder",children:"\uac80\uc0c9\uc5b4 \uc785\ub825..."})})]})}},4935:(e,s,a)=>{a.d(s,{A:()=>p});var t=a(5043),l=a(7950),i=a(5026),r=a(4003),n=a(7138),o=a(9428),c=a(579);const d=t.memo((e=>{let{playlist:s,isChecked:a,onCheck:t}=e;return(0,c.jsxs)("div",{className:"playlist-modal-item",children:[(0,c.jsx)("input",{type:"checkbox",id:`playlist-${s.playlistId}`,checked:a,onChange:()=>t(s.playlistId)}),(0,c.jsxs)("label",{htmlFor:`playlist-${s.playlistId}`,className:"playlist-modal-label",children:[(0,c.jsx)("div",{className:"playlist-modal-image-container",children:(0,c.jsx)("img",{src:(0,n.V)(s.playlistPhoto),alt:s.playlistTitle,className:"playlist-modal-image"})}),(0,c.jsx)("span",{className:"playlist-modal-name",children:s.playlistTitle})]})]})})),m=t.memo((e=>{let{playlists:s,selectedPlaylists:a,loading:t,onCheck:l,onClose:i,onAdd:r}=e;return(0,c.jsx)("div",{className:"playlist-modal-overlay",onClick:i,children:(0,c.jsxs)("div",{className:"playlist-modal",onClick:e=>e.stopPropagation(),children:[(0,c.jsxs)("div",{className:"playlist-modal-header",children:[(0,c.jsx)("h3",{children:"\ud50c\ub808\uc774\ub9ac\uc2a4\ud2b8\uc5d0 \ucd94\uac00"}),(0,c.jsx)("button",{className:"playlist-modal-close",onClick:i,children:"\xd7"})]}),(0,c.jsx)("div",{className:"playlist-modal-body",children:t?(0,c.jsx)("p",{children:"\ud50c\ub808\uc774\ub9ac\uc2a4\ud2b8\ub97c \ubd88\ub7ec\uc624\ub294 \uc911..."}):0===s.length?(0,c.jsx)("p",{children:"\uc0ac\uc6a9 \uac00\ub2a5\ud55c \ud50c\ub808\uc774\ub9ac\uc2a4\ud2b8\uac00 \uc5c6\uc2b5\ub2c8\ub2e4."}):(0,c.jsx)("div",{className:"playlist-modal-list",children:s.map((e=>(0,c.jsx)(d,{playlist:e,isChecked:a.includes(e.playlistId),onCheck:l},e.playlistId)))})}),(0,c.jsx)("div",{className:"playlist-modal-footer",children:(0,c.jsx)("button",{className:"add-to-playlist-button",onClick:r,disabled:0===a.length||t,children:"\ud50c\ub808\uc774\ub9ac\uc2a4\ud2b8\uc5d0 \ucd94\uac00"})})]})})})),p=e=>{let{track:s,isPremium:a}=e;const[n,d]=(0,t.useState)({}),[p,h]=(0,t.useState)(!1),[u,y]=(0,t.useState)([]),[x,j]=(0,t.useState)([]),[v,g]=(0,t.useState)(!1),{addTrackToList:k,setIsPlaying:b,deviceReady:f}=(0,t.useContext)(o.vC),C=(0,t.useRef)(!1),N=(0,r.A)(),w=()=>{h(!1),j([])},P=(0,t.useCallback)((e=>{j((s=>s.includes(e)?s.filter((s=>s!==e)):[...s,e]))}),[]);return s&&s.album&&s.album.images&&s.album.images[0]?(0,c.jsxs)("div",{className:"track-item",onMouseEnter:e=>{const s=e.currentTarget.getBoundingClientRect();d({top:s.top-10+"px",left:`${s.left+s.width/2}px`})},onMouseLeave:()=>{d({})},children:[(0,c.jsx)("img",{className:"track-album-image-music",src:s.album.images[0].url,alt:s.name}),(0,c.jsxs)("div",{className:"track-info",children:[(0,c.jsx)("h4",{children:s.name}),(0,c.jsx)("p",{children:s.artists.map((e=>e.name)).join(", ")}),(0,c.jsxs)("div",{className:"tooltip",style:n,children:[(0,c.jsx)("h4",{children:s.name}),(0,c.jsx)("p",{children:s.artists.map((e=>e.name)).join(", ")})]})]}),(0,c.jsxs)("div",{className:"track-play-button-container",children:[(0,c.jsx)("button",{onClick:()=>(async e=>{if(a)try{k(e),f?b(!0):f||setTimeout((()=>{b(!0)}),1e3)}catch(l){var s,t;if(console.error("\ud2b8\ub799 \uc7ac\uc0dd \uc911 \uc624\ub958:",l),403===(null===(s=l.response)||void 0===s?void 0:s.status))return void window.open(e.external_urls.spotify,"_blank");404===(null===(t=l.response)||void 0===t?void 0:t.status)?alert("Spotify \ud50c\ub808\uc774\uc5b4\ub97c \ucd08\uae30\ud654 \uc911\uc785\ub2c8\ub2e4. \uc7a0\uc2dc \ud6c4\uc5d0 \ub2e4\uc2dc \uc2dc\ub3c4\ud574\uc8fc\uc138\uc694."):alert("\ud2b8\ub799\uc744 \uc7ac\uc0dd\ud560 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4. \ub2e4\uc2dc \uc2dc\ub3c4\ud574\uc8fc\uc138\uc694.")}else window.open(e.external_urls.spotify,"_blank")})(s),className:a?"premium-play":"spotify-link",children:a?"\u25b6":"LINK"}),(0,c.jsx)("button",{className:"add-track-to-playlist-button",onClick:()=>{h(!0),N&&!C.current&&(async e=>{if(e&&!C.current){g(!0);try{const s=await i.A.get(`/playlist/user/${e}`);y(s.data||[]),C.current=!0}catch(s){console.error("\ud50c\ub808\uc774\ub9ac\uc2a4\ud2b8\ub97c \ubd88\ub7ec\uc624\ub294 \ub370 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4:",s)}finally{g(!1)}}})(N.userId)},children:"\u2795"})]}),p&&l.createPortal((0,c.jsx)(m,{playlists:u,selectedPlaylists:x,loading:v,onCheck:P,onClose:w,onAdd:async()=>{if(0!==x.length)try{const e=x.map((e=>i.A.post(`/api/spotify/playlist/${e}/track`,null,{params:{trackId:s.id}})));await Promise.all(e),alert("\uc120\ud0dd\ud55c \ud50c\ub808\uc774\ub9ac\uc2a4\ud2b8\uc5d0 \ud2b8\ub799\uc774 \ucd94\uac00\ub418\uc5c8\uc2b5\ub2c8\ub2e4."),w()}catch(e){console.error("\ud50c\ub808\uc774\ub9ac\uc2a4\ud2b8\uc5d0 \ud2b8\ub799 \ucd94\uac00 \uc2e4\ud328:",e),alert("\ud50c\ub808\uc774\ub9ac\uc2a4\ud2b8\uc5d0 \ud2b8\ub799 \ucd94\uac00 \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4.")}else alert("\ud50c\ub808\uc774\ub9ac\uc2a4\ud2b8\ub97c \uc120\ud0dd\ud574\uc8fc\uc138\uc694.")}}),document.body)]},s.id):null}},6375:(e,s,a)=>{a.d(s,{A:()=>r});var t=a(5043),l=a(5026),i=a(6213);const r=()=>{const[e,s]=(0,t.useState)(""),[a,r]=(0,t.useState)([]),[n,o]=(0,t.useState)(new Audio),[c,d]=(0,t.useState)(!1),[m,p]=(0,t.useState)(null);(0,t.useEffect)((()=>{(async()=>{try{const e=await l.A.get("/api/spotify/userInfo");d("premium"===e.data.product)}catch(e){}})()}),[]),(0,t.useEffect)((()=>{(async()=>{try{const e=(await l.A.get("/music/devices",{headers:{Authorization:`Bearer ${localStorage.getItem("MUSICOVERY_ACCESS_TOKEN")}`}})).data.devices;e.length>0&&(p(e[0].id),await(async e=>{try{const s="https://api.spotify.com/v1/me/player";await i.A.put(s,{device_ids:[e],play:!0},{headers:{Authorization:`Bearer ${localStorage.getItem("MUSICOVERY_ACCESS_TOKEN")}`}})}catch(s){throw console.error("Failed to transfer playback:",s),s}})(e[0].id))}catch(e){console.error("Failed to fetch devices",e)}})()}),[]);return{keyword:e,setKeyword:s,results:a,handleSearch:async s=>{try{const s=(await l.A.get(`/api/spotify/search?keyword=${e}&type=track`)).data.tracks.items.filter((e=>e.is_playable));r(s)}catch(a){console.error("Failed to search music",a),r([])}},isPremium:c,deviceId:m}}},6834:(e,s,a)=>{a.r(s),a.d(s,{default:()=>k});var t=a(5043);const l=e=>{let s=e.getFullYear(),a=e.getMonth()+1,t=e.getDate();return a<10&&(a=`0${a}`),t<10&&(t=`0${t}`),`${s}-${a}-${t}`};var i=a(8574),r=a(1675),n=a(486),o=a(4935),c=a(5026),d=a(4003),m=a(6375),p=a(7138),h=a(579);const u=()=>{const e=(0,r.Zp)(),s=(0,d.A)(),{handlePlay:a,isPremium:u}=(0,m.A)(),[y,x]=(0,t.useState)({playlistTitle:"",playlistComment:"",playlistPhoto:null,musicCheckbox:!1,selectedMusic:"",selectedConcept:"",playlistDate:l(new Date),selectedTracks:[],user:s});(0,t.useEffect)((()=>{s&&x((e=>({...e,user:s})))}),[s]);return(0,h.jsxs)("div",{className:"create-container",children:[(0,h.jsxs)("div",{className:"create-layout",children:[(0,h.jsxs)("div",{className:"create-left",children:[(0,h.jsx)(n.A,{onSelectTrack:e=>{x((s=>({...s,selectedTracks:[...s.selectedTracks,e]})))}}),(0,h.jsxs)("div",{className:"playlist-info",children:[(0,h.jsx)("div",{className:"create_section",children:(0,h.jsxs)("div",{className:"grapCreateDate",children:[(0,h.jsx)("h5",{id:"textCreated",children:"\uc0dd\uc131\uc77c\uc790 \u25b6 "}),(0,h.jsx)("input",{type:"date",value:y.playlistDate,onChange:e=>{const{name:s,value:a,type:t,checked:i}=e.target;x((e=>({...e,[s]:"checkbox"===t?i:a}))),x({...y,playlistDate:l(new Date(e.target.value))})},name:"playlistDate",id:"DateClick"})]})}),(0,h.jsxs)("div",{className:"create_title_section",children:[(0,h.jsx)("h5",{id:"textCreated",children:"\ud50c\ub808\uc774\ub9ac\uc2a4\ud2b8 \uc81c\ubaa9 \u25b6 "}),(0,h.jsx)("input",{type:"text",className:"form-control",name:"playlistTitle",value:y.playlistTitle,placeholder:"\uc81c\ubaa9\uc744 \uc785\ub825\ud558\uc138\uc694...(15\uc790\uc774\ub0b4)",onChange:e=>{const{name:s,value:a,type:t,checked:l}=e.target;x((e=>({...e,[s]:"checkbox"===t?l:a})))},maxLength:"15"})]}),(0,h.jsxs)("div",{className:"create_explain_section",children:[(0,h.jsx)("h5",{id:"textCreated",children:"\ud50c\ub808\uc774\ub9ac\uc2a4\ud2b8 \uc124\uba85 \u25b6 "}),(0,h.jsx)("textarea",{className:"form-control board-textarea",rows:"8",name:"playlistComment",value:y.playlistComment,placeholder:"\ud50c\ub808\uc774\ub9ac\uc2a4\ud2b8 \uc124\uba85\uc744 \uc785\ub825\ud558\uc138\uc694...[300\uc790\uc774\ub0b4]",onChange:e=>{x({...y,playlistComment:e.target.value})},maxLength:"300"})]}),(0,h.jsx)("div",{className:"create_section2",children:(0,h.jsx)("div",{className:"fileinputBtn",children:(0,h.jsx)("input",{type:"file",className:"form-control",name:"playlistPhoto",onChange:e=>{const s=e.target.files[0];s&&s.size>5242880?alert("\ud30c\uc77c \ud06c\uae30\uac00 \ub108\ubb34 \ud07d\ub2c8\ub2e4. \ucd5c\ub300 5MB \uc774\ud558\uc758 \ud30c\uc77c\uc744 \uc5c5\ub85c\ub4dc\ud574\uc8fc\uc138\uc694."):x((e=>({...e,playlistPhoto:s})))},accept:"image/*"})})})]})]}),(0,h.jsxs)("div",{className:"create-right",children:[(0,h.jsx)("h5",{children:"\uc120\ud0dd\ub41c \ud2b8\ub799 \ubaa9\ub85d"}),(0,h.jsx)("ul",{children:y.selectedTracks.map(((e,s)=>(0,h.jsxs)("li",{children:[(0,h.jsx)(o.A,{track:e,handlePlay:a,isPremium:u}),(0,h.jsx)("button",{id:"deleteBtnColor",onClick:()=>{return s=e.id,void x((e=>({...e,selectedTracks:e.selectedTracks.filter((e=>e.id!==s))})));var s},children:"\uc81c\uac70"})]},s)))})]})]}),(0,h.jsxs)("div",{className:"Edit_Btn",children:[(0,h.jsx)(i.A,{text:"\ucde8\uc18c",link:"/PlaylistPage"}),(0,h.jsx)(i.A,{text:"\uc0dd\uc131\ud558\uae30",onClick:()=>{if(!y.playlistTitle||!y.playlistComment||!y.playlistDate||y.selectedTracks.length<=0)return void alert("\ubaa8\ub4e0 \ud544\ub4dc\ub97c \uc785\ub825\ud574\uc8fc\uc138\uc694.");const s=new FormData;s.append("playlistTitle",y.playlistTitle),s.append("playlistComment",y.playlistComment),s.append("playlistDate",y.playlistDate),s.append("isPublic",!1),s.append("userId",y.user.userId),s.append("tracks",y.selectedTracks.map((e=>e.uri))),y.playlistPhoto?s.append("playlistPhoto",y.playlistPhoto):s.append("playlistPhoto",(0,p.N)()),c.A.post("/playlist/create",s,{headers:{"Content-Type":"multipart/form-data"}}).then((s=>{console.log("\u2705 \ud50c\ub808\uc774\ub9ac\uc2a4\ud2b8 \uc0dd\uc131 \uc644\ub8cc:",s.data),e("/PlaylistPage")})).catch((e=>{console.error("\u274c \ud50c\ub808\uc774\ub9ac\uc2a4\ud2b8 \uc0dd\uc131 \uc2e4\ud328:",e),e.response&&(console.error("\ud83d\udccc \uc751\ub2f5 \ub370\uc774\ud130:",e.response.data),console.error("\ud83d\udccc \uc0c1\ud0dc \ucf54\ub4dc:",e.response.status))}))}})]})]})},y=JSON.parse('{"b":["acoustic","afrobeat","alt-rock","alternative","ambient","anime","black-metal","bluegrass","blues","bossanova","brazil","breakbeat","british","cantopop","chicago-house","children","chill","classical","club","comedy","country","dance","dancehall","death-metal","deep-house","detroit-techno","disco","disney","drum-and-bass","dub","dubstep","edm","electro","electronic","emo","folk","forro","french","funk","garage","german","gospel","goth","grindcore","groove","grunge","guitar","happy","hard-rock","hardcore","hardstyle","heavy-metal","hip-hop","holidays","honky-tonk","house","idm","indian","indie","indie-pop","industrial","iranian","j-dance","j-idol","j-pop","j-rock","jazz","k-pop","kids","latin","latino","malay","mandopop","metal","metal-misc","metalcore","minimal-techno","movies","mpb","new-age","new-release","opera","pagode","party","philippines-opm","piano","pop","pop-film","post-dubstep","power-pop","progressive-house","psych-rock","punk","punk-rock","r-n-b","rainy-day","reggae","reggaeton","road-trip","rock","rock-n-roll","rockabilly","romance","sad","salsa","samba","sertanejo","show-tunes","singer-songwriter","ska","sleep","songwriter","soul","soundtracks","spanish","study","summer","swedish","synth-pop","tango","techno","trance","trip-hop","turkish","work-out","world-music"]}'),x=()=>{const e=(0,r.Zp)(),s=(0,d.A)(),{handlePlay:a,isPremium:n}=(0,m.A)(),[u,x]=(0,t.useState)({genre:"",bpm:"",mood:"",selectedGenres:[],recommendations:[],loading:!1,playlistTitle:"",playlistComment:"",playlistPhoto:null,playlistDate:l(new Date),showSaveForm:!1,user:s,previewURL:null}),[j,v]=(0,t.useState)(!1);(0,t.useEffect)((()=>{s&&x((e=>({...e,user:s})))}),[s]);const g=e=>{const{name:s,value:a,type:t,checked:l}=e.target;x((e=>({...e,[s]:"checkbox"===t?l:a})))};return(0,h.jsxs)("div",{className:"keyword-recommendation",children:[(0,h.jsxs)("div",{className:"keyword-form-container",children:[(0,h.jsxs)("div",{className:"form-group",children:[(0,h.jsx)("label",{htmlFor:"genre",children:"\uc7a5\ub974"}),(0,h.jsxs)("select",{name:"genre",value:u.genre,onChange:e=>{const{value:s}=e.target;s&&!u.selectedGenres.includes(s)&&x((e=>({...e,selectedGenres:[...e.selectedGenres,s],genre:""})))},placeholder:"\uc7a5\ub974\ub97c \uc120\ud0dd\ud558\uc138\uc694...",children:[(0,h.jsx)("option",{value:"",children:"\uc7a5\ub974 \uc120\ud0dd"}),y.b.map(((e,s)=>(0,h.jsx)("option",{value:e,children:e},s)))]})]}),(0,h.jsx)("div",{className:"selected-genres",children:u.selectedGenres.map(((e,s)=>(0,h.jsxs)("div",{className:"genre-tag",children:[e,(0,h.jsx)("button",{onClick:()=>(e=>{x((s=>({...s,selectedGenres:s.selectedGenres.filter((s=>s!==e))})))})(e),children:"x"})]},s)))}),(0,h.jsxs)("div",{className:"form-group",children:[(0,h.jsxs)("label",{htmlFor:"bpm",children:["BPM",(0,h.jsx)("button",{onClick:()=>v(!j),children:"?"})," "]}),(0,h.jsx)("input",{type:"number",name:"bpm",value:u.bpm,onChange:g,className:"bpm-form-input",placeholder:"BPM\uc744 \uc785\ub825\ud558\uc138\uc694...",min:"30",max:"990",step:"5"})]}),(0,h.jsxs)("div",{children:[j&&(0,h.jsxs)("div",{className:"bpm-info-box",children:["BPM\uc774\ub780? Beats per minute\uc758 \uc57d\uc790\ub85c 1\ubd84\uc5d0 \ube44\ud2b8\uac00 \uba87 \ubc88 \ubc18\ubcf5\ub418\ub294\uc9c0\ub97c \uc138\ub294 \ub2e8\uc704\uc774\ub2e4.",(0,h.jsx)("br",{}),"[ \uace0\ub974\uae30 \uc27d\uac8c \uc54c\ub824\uc8fc\ub294 BPM\uc885\ub958! ]",(0,h.jsx)("br",{}),"\ubd90\ubc41 : 80(160)~100(200)",(0,h.jsx)("br",{}),"\ud2b8\ub7a9 : 4/4\ubc15\uc790 \uae30\uc900: 50~80 , 2/ 2\ubc15\uc790 \uae30\uc900: 100~160 ",(0,h.jsx)("br",{}),"\ub514\uc2a4\ucf54 : 110~130 ",(0,h.jsx)("br",{}),"\ud55c\uad6d \ub304\uc2a4\uac00\uc694: 125 ~ 290+ , \uc77c\ubcf8 \ub304\uc2a4\uac00\uc694: 140~170+",(0,h.jsx)("br",{}),"\uc815\ud1b5 \ud2b8\ub85c\ud2b8 : 60~90, \uc138\ubbf8 \ud2b8\ub85c\ud2b8 : 90~120, \ub304\uc2a4 \ud2b8\ub85c\ud2b8: 120~140, \ubf55\uc9dd \ud2b8\ub85c\ud2b8 : 140+",(0,h.jsx)("br",{}),"\ub77c\ud2f4 \ud31d: 65~110",(0,h.jsx)("br",{}),"\uc720\ub85c\ube44\ud2b8: 145~165",(0,h.jsx)("br",{}),"\ud558\uc6b0\uc2a4 \ubc0f \uc774\ub85c\ubd80\ud130 \ud070 \uc601\ud5a5\uc744 \ubc1b\uc740 \ucc28\ud2b8\ubba4\uc9c1: 120~134, \ud558\ub4dc \ud558\uc6b0\uc2a4: 130~140",(0,h.jsx)("br",{}),"\ub514\ud2b8\ub85c\uc774\ud2b8 \ud14c\ud06c\ub178 \uc774\ud6c4\uc758 \ud14c\ud06c\ub178: 130~150",(0,h.jsx)("br",{}),"\ud558\ub4dc \ud14c\ud06c\ub178 \ubc0f \uc288\ub780\uce20: 145~170+",(0,h.jsx)("br",{}),"\uc570\ube44\uc5b8\ud2b8 \ud14c\ud06c\ub178: 100~120+",(0,h.jsx)("br",{}),"\ube45 \ube44\ud2b8: 90~140",(0,h.jsx)("br",{}),"\ud2b8\ub79c\uc2a4 : 130~145",(0,h.jsx)("br",{}),"\ud504\ub85c\uadf8\ub808\uc2dc\ube0c \ud2b8\ub79c\uc2a4: 130 \ucd08 ,\ub354\uce58/\uc5c5\ub9ac\ud504\ud305 : 130~140",(0,h.jsx)("br",{}),"\uc2f8\uc774\ud2b8\ub79c\uc2a4\uac19\uc774 \ub9e4\ub2c8\uc545\ud55c \ubc29\uacc4\uc7a5\ub974 : 140 ~ 160+",(0,h.jsx)("br",{}),"\ub365\uc2a4\ud15d: 70~140",(0,h.jsx)("br",{}),"\ub4dc\ub7fc\uc2a4\ud15d \ubc0f \ud558\ud504\ud0c0\uc784 \ub4dc\ub7fc \uc564 \ubca0\uc774\uc2a4: 80~120+",(0,h.jsx)("br",{}),"\ud4e8\ucc98 \ubca0\uc774\uc2a4: 70~120",(0,h.jsx)("br",{}),"\ub4dc\ub7fc \uc564 \ubca0\uc774\uc2a4 \ubc0f \uc815\uae00\uacc4\uc5f4: 160~180+ \uc62c\ub4dc\uc2a4\ucfe8 \ub808\uc774\ube0c: 130~150",(0,h.jsx)("br",{}),"\ub370\uc2a4 \uba54\ud0c8: 130~350+",(0,h.jsx)("br",{}),"\ud4e8\ub108\ub7f4 \ub460 \uba54\ud0c8: 30~100",(0,h.jsx)("br",{}),"\ud558\ub4dc\ucf54\uc5b4 \ud14c\ud06c\ub178: 170~200+",(0,h.jsx)("br",{}),"\uac1c\ubc84\ub958: 180~300+",(0,h.jsx)("br",{}),"\ud504\ub80c\uce58\ucf54\uc5b4: 200~225",(0,h.jsx)("br",{}),"\uba54\uc778\uc2a4\ud2b8\ub9bc \ud558\ub4dc\ucf54\uc5b4: 150 ~ 180+",(0,h.jsx)("br",{}),"\uc2a4\ud53c\ub4dc\ucf54\uc5b4(\uc2a4\ud50c\ub9ac\ud130\ucf54\uc5b4, \uc5d1\uc2a4\ud2b8\ub77c\ud1a4 \ud3ec\ud568): 300~999 ",(0,h.jsx)("br",{}),"\ud558\ub4dc\uc2a4\ud0c0\uc77c: 150~160"]})," "]}),(0,h.jsxs)("div",{className:"form-group",children:[(0,h.jsx)("label",{htmlFor:"mood",children:"\ubd84\uc704\uae30"}),(0,h.jsxs)("select",{name:"mood",value:u.mood,onChange:g,placeholder:"\ubd84\uc704\uae30\ub97c \uc120\ud0dd\ud558\uc138\uc694...",children:[(0,h.jsx)("option",{value:"",children:"\ubd84\uc704\uae30 \uc120\ud0dd"}),(0,h.jsx)("option",{value:"\uc2e0\ub098\ub294",children:"\uc2e0\ub098\ub294"}),(0,h.jsx)("option",{value:"\ud589\ubcf5\ud55c",children:"\ud589\ubcf5\ud55c"}),(0,h.jsx)("option",{value:"\uc794\uc794\ud55c",children:"\uc794\uc794\ud55c"}),(0,h.jsx)("option",{value:"\uc6b0\uc6b8\ud55c",children:"\uc6b0\uc6b8\ud55c"})]})]}),u.recommendations.length>0&&(0,h.jsxs)("div",{className:"keyword-recommendations",children:[(0,h.jsx)("h5",{children:"\ucd94\ucc9c\ub41c \ud2b8\ub799 \ubaa9\ub85d"}),(0,h.jsx)("ul",{children:u.recommendations.map(((e,s)=>(0,h.jsxs)("li",{className:"keyword-recommendations-list-item",children:[(0,h.jsx)(o.A,{track:e,handlePlay:a,isPremium:n}),(0,h.jsx)("button",{onClick:()=>{return s=e.id,void x((e=>({...e,recommendations:e.recommendations.filter((e=>e.id!==s))})));var s},children:"\u274c"})]},s)))})]}),(0,h.jsx)("div",{className:"form-group-button",children:(0,h.jsx)(i.A,{text:"\uc0dd\uc131\ud558\uae30",onClick:async()=>{if(u.selectedGenres.length<=0||!u.bpm||!u.mood)alert("\ubaa8\ub4e0 \ud544\ub4dc\ub97c \uc785\ub825\ud574\uc8fc\uc138\uc694.");else{x((e=>({...e,loading:!0})));try{const e=(await c.A.post("/recommendation/keyword",{genre:u.selectedGenres.join(","),bpm:u.bpm,mood:u.mood})).data.map((e=>JSON.parse(e).tracks.items[0]));x((s=>({...s,recommendations:e,loading:!1,showSaveForm:!0})))}catch(e){console.error("\ucd94\ucc9c \uc694\uccad \uc2e4\ud328:",e),x((e=>({...e,loading:!1})))}}}})})]}),(0,h.jsx)("div",{className:"results-container",children:u.loading?(0,h.jsx)("div",{children:"\ub85c\ub529 \uc911..."}):(0,h.jsx)("div",{children:u.showSaveForm&&(0,h.jsxs)("div",{className:"playlist-save-form",children:[(0,h.jsx)("h5",{children:"\ud50c\ub808\uc774\ub9ac\uc2a4\ud2b8 \uc0dd\uc131"}),(0,h.jsxs)("div",{className:"form-group",children:[(0,h.jsx)("label",{htmlFor:"playlistDate",children:"\uc0dd\uc131\uc77c\uc790 \u25b6 "}),(0,h.jsx)("input",{type:"date",name:"playlistDate",value:u.playlistDate,onChange:e=>{x((s=>({...s,playlistDate:e.target.value})))}})]}),(0,h.jsxs)("div",{className:"form-group",children:[(0,h.jsx)("label",{htmlFor:"playlistPhoto",children:"\ub300\ud45c \uc0ac\uc9c4 \u25b6 "}),(0,h.jsx)("input",{type:"file",name:"playlistPhoto",onChange:e=>{const s=e.target.files[0];if(s&&s.size>5242880)return void alert("\ud30c\uc77c \ud06c\uae30\uac00 \ub108\ubb34 \ud07d\ub2c8\ub2e4. \ucd5c\ub300 5MB \uc774\ud558\uc758 \ud30c\uc77c\uc744 \uc5c5\ub85c\ub4dc\ud574\uc8fc\uc138\uc694.");const a=new FileReader;a.onloadend=()=>{x((e=>({...e,playlistPhoto:s,previewURL:a.result})))},s?a.readAsDataURL(s):x((e=>({...e,playlistPhoto:null,previewURL:null})))},accept:"image/*"}),u.previewURL&&(0,h.jsx)("img",{src:u.previewURL,alt:"\ubbf8\ub9ac\ubcf4\uae30",style:{width:"100px",height:"100px"}})]}),(0,h.jsx)("div",{className:"form-group",children:(0,h.jsx)("input",{type:"text",name:"playlistTitle",value:u.playlistTitle,onChange:g,placeholder:"\ud50c\ub808\uc774\ub9ac\uc2a4\ud2b8 \uc81c\ubaa9\uc744 \uc785\ub825\ud558\uc138\uc694...(25\uc790\uc774\ub0b4)",maxLength:"25"})}),(0,h.jsx)("div",{className:"form-group",children:(0,h.jsx)("textarea",{name:"playlistComment",value:u.playlistComment,onChange:g,placeholder:"\ud50c\ub808\uc774\ub9ac\uc2a4\ud2b8 \uc124\uba85\uc744 \uc785\ub825\ud558\uc138\uc694...(300\uc790\uc774\ub0b4)",maxLength:"300"})}),(0,h.jsx)(i.A,{text:"\uc800\uc7a5\ud558\uae30",onClick:()=>{if(!u.playlistTitle||!u.playlistComment||!u.playlistDate)return void alert("\ubaa8\ub4e0 \ud544\ub4dc\ub97c \uc785\ub825\ud574\uc8fc\uc138\uc694.");const s=new FormData;s.append("playlistTitle",u.playlistTitle),s.append("playlistComment",u.playlistComment),s.append("playlistDate",u.playlistDate),s.append("isPublic",!1),s.append("userId",u.user.userId),s.append("tracks",u.recommendations.map((e=>e.uri))),u.playlistPhoto?s.append("playlistPhoto",u.playlistPhoto):s.append("playlistPhoto",(0,p.N)()),c.A.post("/playlist/create",s,{headers:{"Content-Type":"multipart/form-data"}}).then((s=>{e("/PlaylistPage")})).catch((e=>{console.error("\ud50c\ub808\uc774\ub9ac\uc2a4\ud2b8 \uc0dd\uc131 \uc2e4\ud328:",e),e.response&&(console.error("\uc751\ub2f5 \ub370\uc774\ud130:",e.response.data),console.error("\uc0c1\ud0dc \ucf54\ub4dc:",e.response.status))}))}})]})})})]})};var j=a(5422);const v=()=>{const e=(0,r.Zp)(),s=(0,d.A)(),{handlePlay:a,isPremium:n}=(0,m.A)(),[u,y]=(0,t.useState)({recommendations:[],loading:!1,playlistTitle:"",playlistComment:"",playlistPhoto:null,playlistDate:l(new Date),showSaveForm:!1,user:s,aiFailed:!1,surpriseLoading:!1});(0,t.useEffect)((()=>{s&&y((e=>({...e,user:s})))}),[s]);const x=e=>{const{name:s,value:a}=e.target;y((e=>({...e,[s]:a})))},j=async()=>{try{const e=await c.A.post("/recommendation/train");console.log("AI \ubaa8\ub378 \ud559\uc2b5 \uacb0\uacfc:",e.data)}catch(e){console.error("AI \ubaa8\ub378 \ud559\uc2b5 \uc911 \uc624\ub958 \ubc1c\uc0dd:",e)}},v=async()=>{y((e=>({...e,surpriseLoading:!0})));try{const e=(await c.A.get("/recommendation/surprise")).data.map((e=>JSON.parse(e).tracks.items[0]));y((s=>({...s,recommendations:e,surpriseLoading:!1,showSaveForm:!0}))),console.log("\uae5c\uc9dd \ucd94\ucc9c\ub41c \ud2b8\ub799 \ubaa9\ub85d:",e)}catch(e){console.error("\uae5c\uc9dd \ucd94\ucc9c \ubaa9\ub85d\uc744 \uac00\uc838\uc624\ub294 \uc911 \uc624\ub958 \ubc1c\uc0dd:",e),y((e=>({...e,surpriseLoading:!1})))}};return(0,h.jsxs)("div",{className:"keyword-recommendation",children:[(0,h.jsxs)("div",{className:"keyword-form-container",children:[(0,h.jsx)("div",{className:"form-group2",children:(0,h.jsx)(i.A,{text:"AI \ucd94\ucc9c \ubc1b\uae30",onClick:async()=>{y((e=>({...e,loading:!0})));try{const e=await c.A.get(`/recommendation/ai?userId=${u.user.userId}`);if(console.log("\ucd94\ucc9c\ub41c \ud2b8\ub799 \ubaa9\ub85d:",e),204===e.status)y((e=>({...e,loading:!1,showSaveForm:!1,aiFailed:!0}))),j(),v();else{const s=e.data.tracks;y((e=>({...e,recommendations:s,loading:!1,showSaveForm:!0,aiFailed:!1})))}}catch(e){y((e=>({...e,loading:!1,aiFailed:!0}))),v()}}})}),u.aiFailed&&(0,h.jsxs)("div",{className:"ai-failed",children:[(0,h.jsx)("p",{children:"AI \ucd94\ucc9c \ub370\uc774\ud130\uac00 \ubd80\uc871\ud569\ub2c8\ub2e4.. \uae5c\uc9dd \ucd94\ucc9c\uc744 \ub300\uc2e0 \uc81c\uacf5\ud569\ub2c8\ub2e4."}),u.surpriseLoading?(0,h.jsx)("div",{children:"\uae5c\uc9dd \ucd94\ucc9c \ub85c\ub529 \uc911..."}):null]}),u.recommendations.length>0&&(0,h.jsxs)("div",{className:"keyword-recommendations",children:[(0,h.jsx)("h5",{children:"\ucd94\ucc9c\ub41c \ud2b8\ub799 \ubaa9\ub85d"}),(0,h.jsx)("ul",{children:u.recommendations.map(((e,s)=>(0,h.jsxs)("li",{className:"keyword-recommendations-list-item",children:[(0,h.jsx)(o.A,{track:e,handlePlay:a,isPremium:n}),(0,h.jsx)("button",{onClick:()=>{return s=e.id,void y((e=>({...e,recommendations:e.recommendations.filter((e=>e.id!==s))})));var s},children:"\u274c"})]},s)))})]})]}),(0,h.jsx)("div",{className:"results-container",children:u.loading?(0,h.jsx)("div",{children:"\ub85c\ub529 \uc911..."}):(0,h.jsx)("div",{children:u.showSaveForm&&(0,h.jsxs)("div",{className:"playlist-save-form",children:[(0,h.jsx)("h5",{children:"\ud50c\ub808\uc774\ub9ac\uc2a4\ud2b8 \uc0dd\uc131"}),(0,h.jsxs)("div",{className:"form-group",children:[(0,h.jsx)("label",{htmlFor:"playlistDate",children:"\uc0dd\uc131\uc77c\uc790 \u25b6 "}),(0,h.jsx)("input",{type:"date",name:"playlistDate",value:u.playlistDate,onChange:e=>{y((s=>({...s,playlistDate:e.target.value})))}})]}),(0,h.jsxs)("div",{className:"form-group",children:[(0,h.jsx)("label",{htmlFor:"playlistPhoto",children:"\ub300\ud45c\uc0ac\uc9c4 \u25b6 "}),(0,h.jsx)("input",{type:"file",name:"playlistPhoto",onChange:e=>{const s=e.target.files[0];s&&s.size>5242880?alert("\ud30c\uc77c \ud06c\uae30\uac00 \ub108\ubb34 \ud07d\ub2c8\ub2e4. \ucd5c\ub300 5MB \uc774\ud558\uc758 \ud30c\uc77c\uc744 \uc5c5\ub85c\ub4dc\ud574\uc8fc\uc138\uc694."):y((e=>({...e,playlistPhoto:s})))},accept:"image/*"})]}),(0,h.jsx)("div",{className:"form-group",children:(0,h.jsx)("input",{type:"text",name:"playlistTitle",value:u.playlistTitle,onChange:x,placeholder:"\ud50c\ub808\uc774\ub9ac\uc2a4\ud2b8 \uc81c\ubaa9\uc744 \uc785\ub825\ud558\uc138\uc694...(25\uc790\uc774\ub0b4)",maxLength:"25"})}),(0,h.jsx)("div",{className:"form-group",children:(0,h.jsx)("textarea",{name:"playlistComment",value:u.playlistComment,onChange:x,placeholder:"\ud50c\ub808\uc774\ub9ac\uc2a4\ud2b8 \uc124\uba85\uc744 \uc785\ub825\ud558\uc138\uc694...(300\uc790\uc774\ub0b4)",maxLength:"300"})}),(0,h.jsx)(i.A,{text:"\uc800\uc7a5\ud558\uae30",onClick:()=>{if(!u.playlistTitle||!u.playlistComment||!u.playlistDate)return void alert("\ubaa8\ub4e0 \ud544\ub4dc\ub97c \uc785\ub825\ud574\uc8fc\uc138\uc694.");const s=new FormData;s.append("playlistTitle",u.playlistTitle),s.append("playlistComment",u.playlistComment),s.append("playlistDate",u.playlistDate),s.append("isPublic",!1),s.append("userId",u.user.userId),s.append("tracks",u.recommendations.map((e=>e.uri))),u.playlistPhoto?s.append("playlistPhoto",u.playlistPhoto):s.append("playlistPhoto",(0,p.N)()),c.A.post("/playlist/create",s,{headers:{"Content-Type":"multipart/form-data"}}).then((s=>{console.log("\u2705 \ud50c\ub808\uc774\ub9ac\uc2a4\ud2b8 \uc0dd\uc131 \uc644\ub8cc:",s.data),e("/PlaylistPage")})).catch((e=>{console.error("\u274c \ud50c\ub808\uc774\ub9ac\uc2a4\ud2b8 \uc0dd\uc131 \uc2e4\ud328:",e),e.response&&(console.error("\ud83d\udccc \uc751\ub2f5 \ub370\uc774\ud130:",e.response.data),console.error("\ud83d\udccc \uc0c1\ud0dc \ucf54\ub4dc:",e.response.status))}))}})]})})})]})};const g=function(){const e=(0,r.Zp)(),s=(0,d.A)(),{handlePlay:a,isPremium:n}=(0,m.A)(),[u,y]=(0,t.useState)({recommendations:[],loading:!1,playlistTitle:"",playlistComment:"",playlistPhoto:null,playlistDate:l(new Date),showSaveForm:!1,user:s,previewURL:null});(0,t.useEffect)((()=>{s&&y((e=>({...e,user:s})))}),[s]);const x=e=>{const{name:s,value:a}=e.target;y((e=>({...e,[s]:a})))};return(0,h.jsxs)("div",{className:"keyword-recommendation",children:[(0,h.jsxs)("div",{className:"keyword-form-container",children:[(0,h.jsx)("div",{className:"form-group2",children:(0,h.jsx)(i.A,{text:"Surprise \ucd94\ucc9c \ubc1b\uae30",onClick:async()=>{y((e=>({...e,loading:!0})));try{const e=(await c.A.get("/recommendation/surprise")).data.map((e=>JSON.parse(e).tracks.items[0]));y((s=>({...s,recommendations:e,loading:!1,showSaveForm:!0})))}catch(e){console.error("\ucd94\ucc9c \ubaa9\ub85d\uc744 \uac00\uc838\uc624\ub294 \uc911 \uc624\ub958 \ubc1c\uc0dd:",e),y((e=>({...e,loading:!1})))}}})}),u.recommendations.length>0&&(0,h.jsxs)("div",{className:"keyword-recommendations",children:[(0,h.jsx)("h5",{children:"\ucd94\ucc9c\ub41c \ud2b8\ub799 \ubaa9\ub85d"}),(0,h.jsx)("ul",{children:u.recommendations.map(((e,s)=>(0,h.jsxs)("li",{className:"keyword-recommendations-list-item",children:[(0,h.jsx)(o.A,{track:e,handlePlay:a,isPremium:n}),(0,h.jsx)("button",{onClick:()=>{return s=e.id,void y((e=>({...e,recommendations:e.recommendations.filter((e=>e.id!==s))})));var s},children:"\u274c"})]},s)))})]})]}),(0,h.jsx)("div",{className:"results-container",children:u.loading?(0,h.jsx)("div",{children:"\ub85c\ub529 \uc911..."}):(0,h.jsx)("div",{children:u.showSaveForm&&(0,h.jsxs)("div",{className:"playlist-save-form",children:[(0,h.jsx)("h5",{children:"\ud50c\ub808\uc774\ub9ac\uc2a4\ud2b8 \uc0dd\uc131"}),(0,h.jsxs)("div",{className:"form-group",children:[(0,h.jsx)("label",{htmlFor:"playlistDate",children:"\uc0dd\uc131\uc77c\uc790 \u25b6 "}),(0,h.jsx)("input",{type:"date",name:"playlistDate",value:u.playlistDate,onChange:e=>{y((s=>({...s,playlistDate:e.target.value})))}})]}),(0,h.jsxs)("div",{className:"form-group",children:[(0,h.jsx)("label",{htmlFor:"playlistPhoto",children:"\ub300\ud45c \uc0ac\uc9c4 \u25b6 "}),(0,h.jsx)("input",{type:"file",name:"playlistPhoto",onChange:e=>{const s=e.target.files[0];if(s&&s.size>5242880)return void alert("\ud30c\uc77c \ud06c\uae30\uac00 \ub108\ubb34 \ud07d\ub2c8\ub2e4. \ucd5c\ub300 5MB \uc774\ud558\uc758 \ud30c\uc77c\uc744 \uc5c5\ub85c\ub4dc\ud574\uc8fc\uc138\uc694.");const a=new FileReader;a.onloadend=()=>{y((e=>({...e,playlistPhoto:s,previewURL:a.result})))},s?a.readAsDataURL(s):y((e=>({...e,playlistPhoto:null,previewURL:null})))},accept:"image/*"}),u.previewURL&&(0,h.jsx)("img",{src:u.previewURL,alt:"\ubbf8\ub9ac\ubcf4\uae30",style:{width:"100px",height:"100px"}})]}),(0,h.jsx)("div",{className:"form-group",children:(0,h.jsx)("input",{type:"text",name:"playlistTitle",value:u.playlistTitle,onChange:x,placeholder:"\ud50c\ub808\uc774\ub9ac\uc2a4\ud2b8 \uc81c\ubaa9\uc744 \uc785\ub825\ud558\uc138\uc694...(25\uc790\uc774\ub0b4)",maxLength:"25"})}),(0,h.jsx)("div",{className:"form-group",children:(0,h.jsx)("textarea",{name:"playlistComment",value:u.playlistComment,onChange:x,placeholder:"\ud50c\ub808\uc774\ub9ac\uc2a4\ud2b8 \uc124\uba85\uc744 \uc785\ub825\ud558\uc138\uc694...(300\uc790\uc774\ub0b4)",maxLength:"300"})}),(0,h.jsx)(i.A,{text:"\uc800\uc7a5\ud558\uae30",onClick:()=>{if(!u.playlistTitle||!u.playlistComment||!u.playlistDate)return void alert("\ubaa8\ub4e0 \ud544\ub4dc\ub97c \uc785\ub825\ud574\uc8fc\uc138\uc694.");const s=new FormData;s.append("playlistTitle",u.playlistTitle),s.append("playlistComment",u.playlistComment),s.append("playlistDate",u.playlistDate),s.append("isPublic",!1),s.append("userId",u.user.userId),s.append("tracks",u.recommendations.map((e=>e.uri))),u.playlistPhoto?s.append("playlistPhoto",u.playlistPhoto):s.append("playlistPhoto",(0,p.N)()),c.A.post("/playlist/create",s,{headers:{"Content-Type":"multipart/form-data"}}).then((s=>{e("/PlaylistPage")})).catch((e=>{console.error("\u274c \ud50c\ub808\uc774\ub9ac\uc2a4\ud2b8 \uc0dd\uc131 \uc2e4\ud328:",e),e.response&&(console.error("\ud83d\udccc \uc751\ub2f5 \ub370\uc774\ud130:",e.response.data),console.error("\ud83d\udccc \uc0c1\ud0dc \ucf54\ub4dc:",e.response.status))}))}})]})})})]})},k=()=>{const[e,s]=(0,t.useState)("create"),a=e=>{s(e)};return(0,h.jsxs)("div",{className:"select_section2",children:[(0,h.jsx)(j.A,{}),(0,h.jsxs)("div",{className:"select_section",children:[(0,h.jsxs)("div",{className:"component_switcher",children:[(0,h.jsx)(i.A,{text:"\uc9c1\uc811 \ub9cc\ub4e4\uae30",onClick:()=>a("create")}),(0,h.jsx)(i.A,{text:"\uc790\ub3d9 \uc0dd\uc131",onClick:()=>a("keywordRecommendation")}),(0,h.jsx)(i.A,{text:"AI \uc0dd\uc131",onClick:()=>a("aiRecommendation")}),(0,h.jsx)(i.A,{text:"\uae5c\uc9dd \ucd94\ucc9c",onClick:()=>a("surpriseRecommendation")})]}),(0,h.jsxs)("div",{className:"component_container",children:["keywordRecommendation"===e&&(0,h.jsx)(x,{}),"aiRecommendation"===e&&(0,h.jsx)(v,{}),"surpriseRecommendation"===e&&(0,h.jsx)(g,{}),(0,h.jsx)("div",{className:"component_style",children:"create"===e&&(0,h.jsx)(u,{})})]})]})]})}},7138:(e,s,a)=>{a.d(s,{N:()=>i,V:()=>l});const t="https://easy-turtles-flash.loca.lt/images/default.png",l=e=>e?e.startsWith("/images/")?`https://easy-turtles-flash.loca.lt${e}`:e:t,i=()=>t},8574:(e,s,a)=>{a.d(s,{A:()=>i});a(5043);var t=a(1675),l=a(579);const i=e=>{let{text:s,link:a,color:i,onClick:r=()=>{}}=e;return(0,l.jsx)(t.N_,{to:a,className:"button "+(i?"custom-color":""),onClick:r,children:s})}}}]);
//# sourceMappingURL=834.a5cf2759.chunk.js.map