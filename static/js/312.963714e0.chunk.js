"use strict";(self.webpackChunkmusicovery_front=self.webpackChunkmusicovery_front||[]).push([[312,797],{486:(e,s,t)=>{t.d(s,{A:()=>r});var a=t(5043),i=t(4935),l=t(6375),n=t(579);const r=e=>{let{onSelectTrack:s}=e;const{keyword:t,setKeyword:r,results:c,handleSearch:o,isPremium:d}=(0,l.A)(),[p,u]=(0,a.useState)(!1);return(0,n.jsxs)("div",{className:"music-search",children:[d,(0,n.jsxs)("form",{onSubmit:e=>{e.preventDefault(),o(),u(!0)},children:[" ",(0,n.jsx)("input",{className:"music-search-input",type:"text",value:t,onChange:e=>r(e.target.value),placeholder:"\uc74c\uc545 \uac80\uc0c9"}),(0,n.jsx)("button",{type:"submit",children:"\ud83d\udd0e"})]}),(0,n.jsx)("div",{className:"music-search-results",children:p||0!==c.length?c.map(((e,t)=>(0,n.jsx)("div",{onClick:()=>s(e),children:(0,n.jsx)(i.A,{track:e,isPremium:d})},e.id))):(0,n.jsx)("div",{className:"music-search-placeholder",children:"\uac80\uc0c9\uc5b4 \uc785\ub825..."})})]})}},4312:(e,s,t)=>{t.r(s),t.d(s,{default:()=>k});var a=t(5043),i=t(5422),l=t(8574),n=t(579);const r=e=>{let{onContentChange:s}=e;return(0,n.jsxs)("div",{className:"social-header",children:[(0,n.jsx)(l.A,{text:"\uac8c\uc2dc\ud310\ud648",color:"blue",onClick:()=>s("post")}),(0,n.jsx)(l.A,{text:"\uacf5\uc9c0\uc0ac\ud56d",color:"blue",onClick:()=>s("notice")}),(0,n.jsx)(l.A,{text:"\ubb38\uc758\uc0ac\ud56d",color:"blue",onClick:()=>s("customerSupport")})]})};var c=t(1675);const o=e=>{let{post:s,onSelectPost:t}=e;const a=(0,c.Zp)();return(0,n.jsxs)("div",{className:"post-item "+(s.isNotice?"notice":""),onClick:()=>t(s),children:[(0,n.jsx)("div",{className:"post-number",children:s.id}),(0,n.jsxs)("div",{className:"post-title",children:[s.isNotice&&(0,n.jsx)("span",{className:"notice-label",children:"[\uacf5\uc9c0]"}),s.title]}),(0,n.jsx)("div",{className:"post-author",children:s.user.nickname}),(0,n.jsx)("div",{className:"post-date",children:new Date(s.createdDate).toLocaleDateString()}),(0,n.jsx)("div",{className:"post-views",children:s.viewCount}),(0,n.jsx)("div",{className:"post-report",children:(0,n.jsx)("button",{className:"report-button",onClick:()=>(e=>{a("/userreport",{state:{reportedPost:e}})})(s),children:"\ud83d\udea8"})})]})},d=e=>{let{posts:s,onSelectPost:t,onSortChange:i,onSearch:l,sortOption:r,searchKeyword:c,searchType:d,isNoticeList:p}=e;const[u,h]=(0,a.useState)(c),[m,x]=(0,a.useState)(d);return(0,n.jsxs)("div",{className:"post-list",children:[!p&&(0,n.jsxs)("div",{className:"list-options",children:[(0,n.jsxs)("form",{className:"search-form",onSubmit:e=>{e.preventDefault(),l(m,u)},children:[(0,n.jsxs)("select",{value:m,onChange:e=>{x(e.target.value)},children:[(0,n.jsx)("option",{value:"title",children:"\uc81c\ubaa9"}),(0,n.jsx)("option",{value:"description",children:"\ub0b4\uc6a9"}),(0,n.jsx)("option",{value:"author",children:"\uc791\uc131\uc790"})]}),(0,n.jsx)("input",{type:"text",placeholder:"\uac80\uc0c9\uc5b4\ub97c \uc785\ub825\ud558\uc138\uc694",value:u,onChange:e=>{h(e.target.value)}}),(0,n.jsx)("button",{type:"submit",children:"\uac80\uc0c9"})]}),(0,n.jsx)("div",{className:"sort-options",children:(0,n.jsxs)("select",{value:r,onChange:e=>{const s=e.target.value;i(s)},children:[(0,n.jsx)("option",{value:"latest",children:"\ucd5c\uc2e0\uc21c"}),(0,n.jsx)("option",{value:"oldest",children:"\uc624\ub798\ub41c\uc21c"}),(0,n.jsx)("option",{value:"popular",children:"\uc870\ud68c\uc218\uc21c"})]})})]}),(0,n.jsxs)("div",{className:"post-list-header",children:[(0,n.jsx)("div",{className:"post-number",children:"\ubc88\ud638"}),(0,n.jsx)("div",{className:"post-title",children:"\uc81c\ubaa9"}),(0,n.jsx)("div",{className:"post-author",children:"\uc791\uc131\uc790"}),(0,n.jsx)("div",{className:"post-date",children:"\ub4f1\ub85d\uc77c"}),(0,n.jsx)("div",{className:"post-views",children:"\uc870\ud68c\uc218"}),(0,n.jsx)("div",{className:"post-report",children:"\uc2e0\uace0"})]}),s.map((e=>(0,n.jsx)(o,{post:e,onSelectPost:t},e.id)))]})};var p=t(5026),u=t(4935),h=t(5928),m=t(4003),x=t(7138),j=t(6375);const y=e=>{let{post:s,onBack:t}=e;const[i,l]=(0,a.useState)(null),[r,o]=(0,a.useState)(s.likeCount),[d,y]=(0,a.useState)([]),[v,g]=(0,a.useState)(""),[N,b]=(0,a.useState)(!1),[f,k]=(0,a.useState)(!1),[S,C]=(0,a.useState)(!1),[w,A]=(0,a.useState)(!1),[I,$]=(0,a.useState)(s.title),[P,q]=(0,a.useState)(s.description),[E,D]=(0,a.useState)(s),[T,F]=(0,a.useState)(!1),L=(0,c.Zp)(),_=(0,m.A)(),{isPremium:O}=(0,j.A)();(0,a.useEffect)((()=>{console.log("User info:",_)}),[_]),(0,a.useEffect)((()=>{s.playlist&&(async()=>{try{const e=await p.A.get(`/playlist/detail/${s.playlist.playlistId}`),t=(0,h.C)(e.data.tracks);l({...e.data.playlist,tracksData:t,playlistPhoto:(0,x.V)(e.data.playlist.playlistPhoto)})}catch(e){F(!0)}})(),(async()=>{try{const e=await p.A.get(`/post/replies/${s.id}`);y(e.data),console.log("Fetched replies:",e.data)}catch(e){console.error("Error fetching replies",e)}})(),(async()=>{try{const e=await p.A.get(`/post/like/${s.id}`);o(e.data)}catch(e){console.error("Error fetching like count",e)}})(),(async()=>{try{await p.A.put(`/post/increaseview/${s.id}`,null,{params:{title:s.title,description:s.description}})}catch(e){console.error("Error increasing view count",e)}})()}),[s.playlist,s.id]);return(0,n.jsxs)("div",{className:"post-detail",children:[(0,n.jsxs)("div",{className:"post-meta",children:[(0,n.jsxs)("div",{className:"post-meta-top",children:[(0,n.jsxs)("span",{children:["\uc870\ud68c\uc218: ",E.viewCount]}),(0,n.jsx)("button",{className:"back-button",onClick:t,children:"\ub4a4\ub85c\uac00\uae30"}),(0,n.jsx)("button",{className:"like-button",onClick:async()=>{k(!0);try{o(r+(f?-1:1)),await p.A.post(`/post/like/${s.id}`,{},{params:{userId:_.userId}});const e=await p.A.get(`/post/like/${s.id}`);o(e.data)}catch(e){console.error("Error liking post",e)}finally{k(!1)}},disabled:f,children:f?"\uc88b\uc544\uc694 \ubc18\uc601 \uc911...":`\ud83d\udc4d ${r}`})]}),(0,n.jsx)("div",{className:"post-meta-bottom",children:_&&E.user.userId===_.userId&&(0,n.jsx)(n.Fragment,{children:S?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("button",{className:"post-meta-bottom-button",onClick:async()=>{A(!0);try{await p.A.put(`/post/update/${s.id}`,null,{params:{title:I,description:P}}),D((e=>({...e,title:I,description:P})))}catch(e){console.error("Error updating post",e)}finally{A(!1),C(!1)}},children:"\uc800\uc7a5"}),(0,n.jsx)("button",{className:"post-meta-bottom-button",onClick:()=>{C(!1),$(E.title),q(E.description)},children:"\ucde8\uc18c"})]}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("button",{className:"post-meta-bottom-button",onClick:()=>{C(!0),$(E.title),q(E.description)},disabled:w,children:w?"\uc218\uc815 \uc911...":"\uc218\uc815"}),(0,n.jsx)("button",{className:"post-meta-bottom-button",onClick:async e=>{e.stopPropagation();if(window.confirm("\uc815\ub9d0\ub85c \uc774 \uac8c\uc2dc\uae00\uc744 \uc0ad\uc81c\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?"))try{await p.A.delete(`/post/delete/${s.id}`),window.location.reload(),L("/post")}catch(t){console.error("\uac8c\uc2dc\uae00 \uc0ad\uc81c \uc2e4\ud328:",t)}},children:"\uc0ad\uc81c"})]})})})]}),S?(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)("div",{className:"post-meta-edit",children:[(0,n.jsx)("input",{type:"text",value:I,onChange:e=>$(e.target.value)}),(0,n.jsx)("textarea",{value:P,onChange:e=>q(e.target.value)})]})}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("h2",{children:E.title}),(0,n.jsx)("p",{children:E.description})]}),(0,n.jsxs)("div",{className:"post-meta-writer",children:[(0,n.jsxs)("span",{children:["\uc791\uc131\uc77c: ",new Date(E.createdDate).toLocaleDateString()]}),(0,n.jsxs)("span",{children:["\uc791\uc131\uc790: ",E.user.nickname]})]}),!E.isNotice&&i?(0,n.jsxs)("div",{className:"post-playlist-detail",children:[(0,n.jsx)("h3",{children:"\ud50c\ub808\uc774\ub9ac\uc2a4\ud2b8 \uc815\ubcf4"}),(0,n.jsxs)("div",{className:"post-playlist-meta",children:[(0,n.jsx)("img",{className:"post-playlist-meta-image",src:(0,x.V)(i.playlistPhoto),alt:"Playlist"}),(0,n.jsxs)("div",{className:"post-playlist-meta-text",children:[(0,n.jsxs)("p",{children:["\uc81c\ubaa9: ",i.playlistTitle]}),(0,n.jsxs)("p",{children:["\uc124\uba85: ",i.playlistComment]}),(0,n.jsxs)("p",{children:["\uc791\uc131\uc77c: ",new Date(i.playlistDate).toLocaleDateString()]})]})]}),(0,n.jsx)("div",{className:"post-playlist-tracks",children:i.tracksData.map((e=>(0,n.jsx)(u.A,{track:e,isPremium:O})))})]}):T?(0,n.jsx)("p",{children:"Spotify \uacc4\uc84d \uc5f0\ub3d9\uc774 \ud544\uc694\ud569\ub2c8\ub2e4."}):(0,n.jsx)("p",{}),(0,n.jsxs)("div",{className:"comments-section",children:[(0,n.jsx)("h3",{children:"\ub313\uae00"}),(0,n.jsxs)("div",{className:"comment-input",children:[(0,n.jsx)("textarea",{value:v,onChange:e=>g(e.target.value),placeholder:"\ub313\uae00\uc744 \uc785\ub825\ud558\uc138\uc694..."}),(0,n.jsx)("button",{onClick:async()=>{if(v.trim()){b(!0);try{await p.A.post(`/post/reply/${s.id}`,null,{params:{userId:_.userId,content:v}}),y([...d,{user:_,content:v,createdDate:new Date}]),g("")}catch(e){console.error("Error adding reply",e)}finally{b(!1)}}},disabled:N,children:N?"\ub313\uae00 \uc791\uc131 \uc911...":"\ub313\uae00 \uc791\uc131"})]}),(0,n.jsx)("div",{className:"post-comments-list",children:d.length>0?d.map(((e,s)=>(0,n.jsxs)("div",{className:"post-comment-item",children:[(0,n.jsxs)("div",{className:"post-comment-text",children:[(0,n.jsxs)("span",{className:"comment-author",children:[e.user.nickname,":"]}),(0,n.jsx)("span",{className:"comment-content",children:e.content})]}),(0,n.jsxs)("div",{className:"post-comment-button",children:[(0,n.jsx)("div",{children:new Date(e.createdDate).toLocaleDateString()}),_&&e.user.userId===_.userId&&(0,n.jsx)("button",{onClick:()=>(async(e,s)=>{try{await p.A.delete(`/post/replydelete/${e}`,{params:{postId:s}}),y(d.filter((s=>s.id!==e)))}catch(t){console.error("Error deleting reply",t)}})(e.id,E.id),children:"\uc0ad\uc81c"})]})]},s))):(0,n.jsx)("p",{children:"\ub313\uae00\uc774 \uc5c6\uc2b5\ub2c8\ub2e4."})})]})]})},v=e=>{let{onSubmit:s,onCancel:t,isNoticeForm:i}=e;const[l,r]=(0,a.useState)(""),[c,o]=(0,a.useState)(""),d=(0,m.A)(),[u,h]=(0,a.useState)([]),[j,y]=(0,a.useState)(null);(0,a.useEffect)((()=>{d&&!i&&(async()=>{try{const e=await p.A.get(`/playlist/user/${d.userId}`);console.log(e),h(e.data)}catch(e){console.error("Failed to fetch playlists",e)}})()}),[d,i]);const v=(0,x.N)();return(0,n.jsx)("div",{className:"post-form",children:(0,n.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),i||j)try{if(i){await p.A.post(`/post/createnotice?userId=${d.userId}&title=${l}&description=${c}`,{},{headers:{Authorization:`Bearer ${localStorage.getItem("MUSICOVERY_TOKEN")}`}})}else{await p.A.post(`/post/create?userId=${d.userId}&title=${l}&description=${c}&playlistId=${j.playlistId}`,{})}s()}catch(t){console.error("Failed to create post",t)}else alert("\ud50c\ub808\uc774\ub9ac\uc2a4\ud2b8\ub97c \uc120\ud0dd\ud574\uc8fc\uc138\uc694.")},children:[(0,n.jsxs)("div",{className:"form-group",children:[(0,n.jsx)("label",{children:"\uc81c\ubaa9"}),(0,n.jsx)("input",{type:"text",value:l,onChange:e=>r(e.target.value),required:!0})]}),(0,n.jsxs)("div",{className:"form-group",children:[(0,n.jsx)("label",{children:"\ub0b4\uc6a9"}),(0,n.jsx)("textarea",{value:c,onChange:e=>o(e.target.value),required:!0})]}),!i&&(0,n.jsxs)("div",{className:"form-group",children:[(0,n.jsx)("label",{children:"\ud50c\ub808\uc774\ub9ac\uc2a4\ud2b8 \uc120\ud0dd"}),(0,n.jsx)("div",{className:"postform-playlist-list-container",children:(0,n.jsx)("div",{className:"postform-playlist-list",children:u.map((e=>{const s=e.playlistPhoto?e.playlistPhoto.startsWith("/images/")?`https://brave-hairs-check.loca.lt${e.playlistPhoto}`:e.playlistPhoto:v;return(0,n.jsxs)("div",{onClick:()=>{return s=e,void(j&&j.playlistId===s.playlistId?y(null):y(s));var s},className:"postform-playlist-item "+(j&&j.playlistId===e.playlistId?"selected":""),children:[(0,n.jsx)("img",{src:s,alt:e.playlistTitle}),(0,n.jsx)("div",{className:"postform-playlist-info",children:(0,n.jsx)("div",{children:e.playlistTitle})})]},e.playlistId)}))})})]}),(0,n.jsxs)("div",{className:"form-actions",children:[(0,n.jsx)("button",{type:"button",className:"postform-cancel-button",onClick:t,children:"\ucde8\uc18c"}),(0,n.jsx)("button",{type:"submit",className:"postform-submit-button",children:"\uc791\uc131"})]})]})})},g=()=>{const[e,s]=(0,a.useState)([]),[t,i]=(0,a.useState)([]),[l,r]=(0,a.useState)(null),[o,u]=(0,a.useState)(!1),[h,m]=(0,a.useState)(0),[x,j]=(0,a.useState)(0),[g,N]=(0,a.useState)(!1),[b,f]=(0,a.useState)("latest"),[k,S]=(0,a.useState)(""),[C,w]=(0,a.useState)("title"),A=(0,c.Zp)(),I=(0,c.zy)();(0,a.useEffect)((()=>{const e=new URLSearchParams(I.search),s=parseInt(e.get("page")||"0",10),t=e.get("sort")||"latest",a=e.get("searchType")||"title",i=e.get("keyword")||"";m(s),f(t),w(a),S(i),$(s,t,a,i)}),[I.search]);const $=(0,a.useCallback)((async(e,t,a,i)=>{try{var l;N(!0);let n=`/post/list?page=${e}&size=15`;t&&(n+=`&sort=${t}`),a&&i&&(n+=`&searchType=${a}&keyword=${i}`);const r=await p.A.get(n);s((null===(l=r.data._embedded)||void 0===l?void 0:l.playlistPostDTOList)||[]),j(r.data.page.totalPages)}catch(n){console.error("Failed to fetch posts",n),s([]),j(0)}finally{N(!1)}}),[]),P=(0,a.useCallback)((()=>{const e=new URLSearchParams;e.set("page",h.toString()),e.set("sort",b),e.set("searchType",C),e.set("keyword",k),A(`?${e.toString()}`,{replace:!0})}),[h,b,C,k,A]);(0,a.useEffect)((()=>{P()}),[h,b,C,k,P]);const q=()=>{r(null),u(!1)},E=()=>{window.scrollTo({top:0,behavior:"smooth"})};return o?(0,n.jsx)(v,{onSubmit:()=>{u(!1),$(h,b,C,k)},onCancel:q,isNoticeForm:!1}):l?(0,n.jsx)(y,{post:l,onBack:q}):(0,n.jsx)("div",{className:"post-body",children:g?(0,n.jsx)("div",{className:"loading-spinner",children:"\ub85c\ub529 \uc911..."}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(d,{posts:e,onSelectPost:e=>{r(e)},onSortChange:e=>{f(e),m(0)},onSearch:(e,s)=>{w(e),S(s),m(0),$(0,b,e,s)},sortOption:b,searchKeyword:k,searchType:C,isNoticeList:!1}),(0,n.jsxs)("div",{className:"pagination",children:[(0,n.jsx)("button",{className:"page-button",onClick:()=>{h>0&&(m(h-1),E())},disabled:0===h,children:"\uc774\uc804"}),(0,n.jsx)("span",{className:"page-number",children:h+1}),(0,n.jsx)("button",{className:"page-button",onClick:()=>{h<x-1&&(m(h+1),E())},disabled:h===x-1,children:"\ub2e4\uc74c"}),(0,n.jsx)("button",{className:"write-button",onClick:()=>u(!0),children:"\uc791\uc131"})]})]})})},N=()=>{const[e,s]=(0,a.useState)([]),[t,i]=(0,a.useState)(null),[l,r]=(0,a.useState)(!1),[o,u]=(0,a.useState)(0),[h,x]=(0,a.useState)(0),[j,g]=(0,a.useState)(!1),[N,b]=(0,a.useState)("latest"),[f,k]=(0,a.useState)(""),[S,C]=(0,a.useState)("title"),w=(0,m.A)(),A=(0,c.Zp)(),I=(0,c.zy)();(0,a.useEffect)((()=>{const e=new URLSearchParams(I.search);u(parseInt(e.get("page")||"0",10)),b(e.get("sort")||"latest"),C(e.get("searchType")||"title"),k(e.get("keyword")||"")}),[I.search]);const $=(0,a.useCallback)((async()=>{try{var e;g(!0);const t=await p.A.get("/post/notices?page=0&size=15");s((null===(e=t.data._embedded)||void 0===e?void 0:e.playlistPostDTOList)||[]),x(t.data.page.totalPages)}catch(t){console.error("Failed to fetch notice posts",t),s([]),x(0)}finally{g(!1)}console.log(w)}),[w]);(0,a.useEffect)((()=>{$()}),[o,N,$]);const P=(0,a.useCallback)((()=>{const e=new URLSearchParams;e.set("page",o.toString()),e.set("sort",N),e.set("searchType",S),e.set("keyword",f),A(`?${e.toString()}`,{replace:!0})}),[o,N,S,f,A]);(0,a.useEffect)((()=>{P()}),[o,N,S,f,P]);const q=()=>{i(null),r(!1)},E=()=>{window.scrollTo({top:0,behavior:"smooth"})};return l?(0,n.jsx)(v,{onSubmit:()=>{r(!1),$()},onCancel:q,isNoticeForm:!0}):t?(0,n.jsx)(y,{post:t,onBack:q}):(0,n.jsx)("div",{className:"post-body",children:j?(0,n.jsx)("div",{className:"loading-spinner",children:"\ub85c\ub529 \uc911..."}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(d,{posts:e,onSelectPost:e=>{i(e)},onSortChange:e=>{b(e),u(0)},onSearch:(e,s)=>{C(e),k(s),u(0)},sortOption:N,searchKeyword:f,searchType:S,isNoticeList:!0}),(0,n.jsxs)("div",{className:"pagination",children:[(0,n.jsx)("button",{className:"page-button",onClick:()=>{o>0&&(u(o-1),E())},disabled:0===o,children:"\uc774\uc804"}),(0,n.jsx)("span",{className:"page-number",children:o+1}),(0,n.jsx)("button",{className:"page-button",onClick:()=>{o<h-1&&(u(o+1),E())},disabled:o===h-1,children:"\ub2e4\uc74c"}),w&&w.admin&&(0,n.jsx)("button",{className:"write-button",onClick:()=>r(!0),children:"\uc791\uc131"})]})]})})};var b=t(8797),f=t(5520);const k=()=>{const[e,s]=(0,a.useState)("post");return(0,n.jsx)("div",{children:(0,n.jsxs)("div",{className:"post-page",children:[(0,n.jsx)(i.A,{}),(0,n.jsxs)(f.A,{children:[(0,n.jsx)(r,{onContentChange:e=>{s(e)}}),(0,n.jsxs)("div",{className:"post-list-container",children:["post"===e&&(0,n.jsx)(g,{}),"notice"===e&&(0,n.jsx)(N,{}),"customerSupport"===e&&(0,n.jsx)(b.default,{})]})]})]})})}},4935:(e,s,t)=>{t.d(s,{A:()=>u});var a=t(5043),i=t(7950),l=t(5026),n=t(4003),r=t(7138),c=t(9428),o=t(579);const d=a.memo((e=>{let{playlist:s,isChecked:t,onCheck:a}=e;return(0,o.jsxs)("div",{className:"playlist-modal-item",children:[(0,o.jsx)("input",{type:"checkbox",id:`playlist-${s.playlistId}`,checked:t,onChange:()=>a(s.playlistId)}),(0,o.jsxs)("label",{htmlFor:`playlist-${s.playlistId}`,className:"playlist-modal-label",children:[(0,o.jsx)("div",{className:"playlist-modal-image-container",children:(0,o.jsx)("img",{src:(0,r.V)(s.playlistPhoto),alt:s.playlistTitle,className:"playlist-modal-image"})}),(0,o.jsx)("span",{className:"playlist-modal-name",children:s.playlistTitle})]})]})})),p=a.memo((e=>{let{playlists:s,selectedPlaylists:t,loading:a,onCheck:i,onClose:l,onAdd:n}=e;return(0,o.jsx)("div",{className:"playlist-modal-overlay",onClick:l,children:(0,o.jsxs)("div",{className:"playlist-modal",onClick:e=>e.stopPropagation(),children:[(0,o.jsxs)("div",{className:"playlist-modal-header",children:[(0,o.jsx)("h3",{children:"\ud50c\ub808\uc774\ub9ac\uc2a4\ud2b8\uc5d0 \ucd94\uac00"}),(0,o.jsx)("button",{className:"playlist-modal-close",onClick:l,children:"\xd7"})]}),(0,o.jsx)("div",{className:"playlist-modal-body",children:a?(0,o.jsx)("p",{children:"\ud50c\ub808\uc774\ub9ac\uc2a4\ud2b8\ub97c \ubd88\ub7ec\uc624\ub294 \uc911..."}):0===s.length?(0,o.jsx)("p",{children:"\uc0ac\uc6a9 \uac00\ub2a5\ud55c \ud50c\ub808\uc774\ub9ac\uc2a4\ud2b8\uac00 \uc5c6\uc2b5\ub2c8\ub2e4."}):(0,o.jsx)("div",{className:"playlist-modal-list",children:s.map((e=>(0,o.jsx)(d,{playlist:e,isChecked:t.includes(e.playlistId),onCheck:i},e.playlistId)))})}),(0,o.jsx)("div",{className:"playlist-modal-footer",children:(0,o.jsx)("button",{className:"add-to-playlist-button",onClick:n,disabled:0===t.length||a,children:"\ud50c\ub808\uc774\ub9ac\uc2a4\ud2b8\uc5d0 \ucd94\uac00"})})]})})})),u=e=>{let{track:s,isPremium:t}=e;const[r,d]=(0,a.useState)({}),[u,h]=(0,a.useState)(!1),[m,x]=(0,a.useState)([]),[j,y]=(0,a.useState)([]),[v,g]=(0,a.useState)(!1),{addTrackToList:N,setIsPlaying:b,deviceReady:f}=(0,a.useContext)(c.vC),k=(0,a.useRef)(!1),S=(0,n.A)(),C=()=>{h(!1),y([])},w=(0,a.useCallback)((e=>{y((s=>s.includes(e)?s.filter((s=>s!==e)):[...s,e]))}),[]);return s&&s.album&&s.album.images&&s.album.images[0]?(0,o.jsxs)("div",{className:"track-item",onMouseEnter:e=>{const s=e.currentTarget.getBoundingClientRect();d({top:s.top-10+"px",left:`${s.left+s.width/2}px`})},onMouseLeave:()=>{d({})},children:[(0,o.jsx)("img",{className:"track-album-image-music",src:s.album.images[0].url,alt:s.name}),(0,o.jsxs)("div",{className:"track-info",children:[(0,o.jsx)("h4",{children:s.name}),(0,o.jsx)("p",{children:s.artists.map((e=>e.name)).join(", ")}),(0,o.jsxs)("div",{className:"tooltip",style:r,children:[(0,o.jsx)("h4",{children:s.name}),(0,o.jsx)("p",{children:s.artists.map((e=>e.name)).join(", ")})]})]}),(0,o.jsxs)("div",{className:"track-play-button-container",children:[(0,o.jsx)("button",{onClick:()=>(async e=>{if(t)try{N(e),f?b(!0):f||setTimeout((()=>{b(!0)}),1e3)}catch(i){var s,a;if(console.error("\ud2b8\ub799 \uc7ac\uc0dd \uc911 \uc624\ub958:",i),403===(null===(s=i.response)||void 0===s?void 0:s.status))return void window.open(e.external_urls.spotify,"_blank");404===(null===(a=i.response)||void 0===a?void 0:a.status)?alert("Spotify \ud50c\ub808\uc774\uc5b4\ub97c \ucd08\uae30\ud654 \uc911\uc785\ub2c8\ub2e4. \uc7a0\uc2dc \ud6c4\uc5d0 \ub2e4\uc2dc \uc2dc\ub3c4\ud574\uc8fc\uc138\uc694."):alert("\ud2b8\ub799\uc744 \uc7ac\uc0dd\ud560 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4. \ub2e4\uc2dc \uc2dc\ub3c4\ud574\uc8fc\uc138\uc694.")}else window.open(e.external_urls.spotify,"_blank")})(s),className:t?"premium-play":"spotify-link",children:t?"\u25b6":"LINK"}),(0,o.jsx)("button",{className:"add-track-to-playlist-button",onClick:()=>{h(!0),S&&!k.current&&(async e=>{if(e&&!k.current){g(!0);try{const s=await l.A.get(`/playlist/user/${e}`);x(s.data||[]),k.current=!0}catch(s){console.error("\ud50c\ub808\uc774\ub9ac\uc2a4\ud2b8\ub97c \ubd88\ub7ec\uc624\ub294 \ub370 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4:",s)}finally{g(!1)}}})(S.userId)},children:"\u2795"})]}),u&&i.createPortal((0,o.jsx)(p,{playlists:m,selectedPlaylists:j,loading:v,onCheck:w,onClose:C,onAdd:async()=>{if(0!==j.length)try{const e=j.map((e=>l.A.post(`/api/spotify/playlist/${e}/track`,null,{params:{trackId:s.id}})));await Promise.all(e),alert("\uc120\ud0dd\ud55c \ud50c\ub808\uc774\ub9ac\uc2a4\ud2b8\uc5d0 \ud2b8\ub799\uc774 \ucd94\uac00\ub418\uc5c8\uc2b5\ub2c8\ub2e4."),C()}catch(e){console.error("\ud50c\ub808\uc774\ub9ac\uc2a4\ud2b8\uc5d0 \ud2b8\ub799 \ucd94\uac00 \uc2e4\ud328:",e),alert("\ud50c\ub808\uc774\ub9ac\uc2a4\ud2b8\uc5d0 \ud2b8\ub799 \ucd94\uac00 \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4.")}else alert("\ud50c\ub808\uc774\ub9ac\uc2a4\ud2b8\ub97c \uc120\ud0dd\ud574\uc8fc\uc138\uc694.")}}),document.body)]},s.id):null}},5520:(e,s,t)=>{t.d(s,{A:()=>d});var a=t(5043),i=t(486),l=t(5026),n=t(4003),r=t(1675),c=t(579);const o=()=>{const e=(0,r.Zp)(),[s,t]=(0,a.useState)([]),[i,o]=(0,a.useState)([]),[d,p]=(0,a.useState)([]),[u,h]=(0,a.useState)(!1),[m,x]=(0,a.useState)(""),[j,y]=(0,a.useState)([]),[v,g]=(0,a.useState)("search"),N=(0,n.A)();(0,a.useEffect)((()=>{N&&(b(),f(),k())}),[N]);const b=async()=>{try{const e=await l.A.get(`/friends/list?userId=${N.id}`);t(e.data)}catch(e){console.error("\uce5c\uad6c \ubaa9\ub85d\uc744 \uac00\uc838\uc624\ub294 \ub370 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4.",e)}},f=async()=>{try{const e=await l.A.get(`/friends/friendRequests?friendId=${N.id}`);o(e.data)}catch(e){console.error("\uce5c\uad6c \uc694\uccad \ubaa9\ub85d\uc744 \uac00\uc838\uc624\ub294 \ub370 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4.",e)}},k=async()=>{try{const e=await l.A.get(`/friends/pendingRequests?userId=${N.id}`);p(e.data)}catch(e){console.error("\ub0b4\uac00 \uc694\uccad\ud55c \uce5c\uad6c \ubaa9\ub85d\uc744 \uac00\uc838\uc624\ub294 \ub370 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4.",e)}},S=e=>s.some((s=>s.friend.id===e))||i.some((s=>s.user.id===e))||d.some((s=>s.friend.id===e));return(0,c.jsxs)("div",{children:[(0,c.jsxs)("div",{className:"friends-list-container",children:[(0,c.jsx)("h2",{children:"\uce5c\uad6c \ubaa9\ub85d"}),(0,c.jsx)("button",{onClick:()=>h(!0),className:"add-friend-button",children:"\uce5c\uad6c \ucd94\uac00"}),(0,c.jsx)("div",{className:"friends-list",children:s.map((s=>(0,c.jsxs)("div",{className:"friend-item",onClick:()=>(s=>{e("/playlistPage",{state:{friendInfo:s}})})(s.friend.id===N.id?s.user:s.friend),children:[(0,c.jsxs)("p",{children:[(0,c.jsx)("strong",{children:"\uce5c\uad6c \ubcc4\uba85 :"})," ",s.friend.id===N.id?s.user.nickname:s.friend.nickname]}),(0,c.jsx)("button",{className:"friend-delete-button",onClick:e=>(async(e,s)=>{s.stopPropagation();try{await l.A.delete("/friends/delete",{params:{userId:N.id,friendId:e}}),b()}catch(t){console.error("\uce5c\uad6c \uc0ad\uc81c\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4.",t)}})(s.friend.id,e),children:"\u274c"})]},s.id)))})]}),u&&(0,c.jsx)("div",{className:"modal",children:(0,c.jsxs)("div",{className:"modal-content",children:[(0,c.jsx)("span",{className:"close",onClick:()=>h(!1),children:"\xd7"}),(0,c.jsxs)("div",{className:"modal-tabs",children:[(0,c.jsx)("button",{className:"modal-tab-button "+("search"===v?"active":""),onClick:()=>g("search"),children:"\uce5c\uad6c \uac80\uc0c9"}),(0,c.jsx)("button",{className:"modal-tab-button "+("pending"===v?"active":""),onClick:()=>g("pending"),children:"\uc694\uccad\ud55c \ubaa9\ub85d"}),(0,c.jsx)("button",{className:"modal-tab-button "+("requests"===v?"active":""),onClick:()=>g("requests"),children:"\ubc1b\uc740 \uce5c\uad6c \uc694\uccad"})]}),"search"===v&&(0,c.jsxs)("div",{className:"friendlist-search-tab",children:[(0,c.jsx)("h2",{children:"\uce5c\uad6c \ucd94\uac00"}),(0,c.jsx)("input",{type:"text",placeholder:"\uac80\uc0c9 (ID, \uc774\uba54\uc77c, \ub2c9\ub124\uc784)",value:m,onChange:e=>x(e.target.value)}),(0,c.jsx)("button",{onClick:async()=>{try{const e=await l.A.get(`/friends/search?keyword=${m}`);y(e.data)}catch(e){console.error("\uc0ac\uc6a9\uc790 \uac80\uc0c9\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4.",e)}},children:"\uac80\uc0c9"}),(0,c.jsx)("div",{className:"search-results",children:j.map((e=>(0,c.jsxs)("div",{className:"search-result-item",children:[(0,c.jsxs)("p",{children:[(0,c.jsx)("strong",{children:"ID:"})," ",e.id]}),(0,c.jsxs)("p",{children:[(0,c.jsx)("strong",{children:"\uc774\uba54\uc77c:"})," ",e.email]}),(0,c.jsxs)("p",{children:[(0,c.jsx)("strong",{children:"\ub2c9\ub124\uc784:"})," ",e.nickname]}),(0,c.jsx)("button",{onClick:()=>(async e=>{try{await l.A.post("/friends/add",{userId:N.id,friendId:e}),b(),k()}catch(s){console.error("\uce5c\uad6c \ucd94\uac00\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4.",s)}})(e.id),disabled:S(e.id),children:S(e.id)?"\uc694\uccad\ub428":"\uce5c\uad6c \ucd94\uac00"})]},e.id)))})]}),"pending"===v&&(0,c.jsxs)("div",{className:"friendlist-pending-tab",children:[(0,c.jsx)("h2",{children:"\uc694\uccad\ud55c \ubaa9\ub85d"}),(0,c.jsx)("div",{className:"pending-requests-list",children:0===d.length?(0,c.jsx)("p",{children:"\uc694\uccad\ud55c \ubaa9\ub85d\uc774 \uc5c6\uc2b5\ub2c8\ub2e4."}):d.map((e=>(console.log(e),(0,c.jsx)("div",{className:"pending-request-item",children:(0,c.jsxs)("p",{children:[(0,c.jsx)("strong",{children:"\uc694\uccad\ud55c \uc0ac\uc6a9\uc790 ID:"})," ",e.friend.nickname]})},e.id))))})]}),"requests"===v&&(0,c.jsxs)("div",{className:"friendlist-requests-tab",children:[(0,c.jsx)("h2",{children:"\ubc1b\uc740 \uce5c\uad6c \uc694\uccad"}),(0,c.jsx)("div",{className:"friend-requests-list",children:0===i.length?(0,c.jsx)("p",{children:"\ubc1b\uc740 \uc694\uccad\uc774 \uc5c6\uc2b5\ub2c8\ub2e4."}):i.map((e=>(console.log(e),(0,c.jsx)("div",{className:"friend-request-item",children:(0,c.jsxs)("p",{children:[(0,c.jsx)("strong",{children:"\uc694\uccad\ud55c \uc0ac\uc6a9\uc790:"})," ",e.user.nickname,(0,c.jsx)("button",{className:"accept-button",onClick:()=>(async e=>{try{await l.A.post("/friends/accept",null,{params:{friendRequestId:e}}),b(),f()}catch(s){console.error("\uce5c\uad6c \uc694\uccad \uc218\ub77d\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4.",s)}})(e.id),children:"\u2705"})]})},e.id))))})]})]})})]})},d=e=>{let{children:s}=e;return(0,c.jsxs)("div",{className:"sidebar-layout-layout",children:[(0,c.jsxs)("div",{className:"sidebar-layout-sidebar",children:[(0,c.jsx)(i.A,{onSelectTrack:()=>{}}),(0,c.jsx)(o,{})]}),(0,c.jsx)("div",{className:"sidebar-layout-main-content",children:s})]})}},5928:(e,s,t)=>{t.d(s,{C:()=>a});const a=e=>("string"===typeof e?JSON.parse(e):e).items.map((e=>({id:e.track.id,...e.track})))},6375:(e,s,t)=>{t.d(s,{A:()=>n});var a=t(5043),i=t(5026),l=t(6213);const n=()=>{const[e,s]=(0,a.useState)(""),[t,n]=(0,a.useState)([]),[r,c]=(0,a.useState)(new Audio),[o,d]=(0,a.useState)(!1),[p,u]=(0,a.useState)(null);(0,a.useEffect)((()=>{(async()=>{try{const e=await i.A.get("/api/spotify/userInfo");d("premium"===e.data.product)}catch(e){}})()}),[]),(0,a.useEffect)((()=>{(async()=>{try{const e=(await i.A.get("/music/devices",{headers:{Authorization:`Bearer ${localStorage.getItem("MUSICOVERY_ACCESS_TOKEN")}`}})).data.devices;e.length>0&&(u(e[0].id),await(async e=>{try{const s="https://api.spotify.com/v1/me/player";await l.A.put(s,{device_ids:[e],play:!0},{headers:{Authorization:`Bearer ${localStorage.getItem("MUSICOVERY_ACCESS_TOKEN")}`}})}catch(s){throw console.error("Failed to transfer playback:",s),s}})(e[0].id))}catch(e){console.error("Failed to fetch devices",e)}})()}),[]);return{keyword:e,setKeyword:s,results:t,handleSearch:async s=>{try{const s=(await i.A.get(`/api/spotify/search?keyword=${e}&type=track`)).data.tracks.items.filter((e=>e.is_playable));n(s)}catch(t){console.error("Failed to search music",t),n([])}},isPremium:o,deviceId:p}}},7138:(e,s,t)=>{t.d(s,{N:()=>l,V:()=>i});const a="https://brave-hairs-check.loca.lt/images/default.png",i=e=>e?e.startsWith("/images/")?`https://brave-hairs-check.loca.lt${e}`:e:a,l=()=>a},8574:(e,s,t)=>{t.d(s,{A:()=>l});t(5043);var a=t(1675),i=t(579);const l=e=>{let{text:s,link:t,color:l,onClick:n=()=>{}}=e;return(0,i.jsx)(a.N_,{to:t,className:"button "+(l?"custom-color":""),onClick:n,children:s})}},8797:(e,s,t)=>{t.r(s),t.d(s,{default:()=>r});var a=t(5043),i=t(5026),l=t(4003),n=t(579);const r=()=>{const[e,s]=(0,a.useState)(""),[t,r]=(0,a.useState)([]),[c,o]=(0,a.useState)({}),d=(0,l.A)();(0,a.useEffect)((()=>{d&&p()}),[d]);const p=async()=>{try{const e=await i.A.get(`/customersupport/inquiries?userId=${d.id}`);r(e.data)}catch(e){console.error("\ubb38\uc758\uc0ac\ud56d \ubaa9\ub85d\uc744 \uac00\uc838\uc624\ub294 \ub370 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4.",e)}};return(0,n.jsxs)("div",{className:"customer-support-container",children:[(0,n.jsx)("h1",{children:"\ubb38\uc758\uc0ac\ud56d"}),(0,n.jsxs)("form",{onSubmit:async t=>{t.preventDefault();try{if(!d)return void alert("\ub85c\uadf8\uc778\uc774 \ud544\uc694\ud569\ub2c8\ub2e4.");const t={userId:d.id,question:e},a=await i.A.post("/customersupport/inquiry",t);console.log("\ubb38\uc758\uc0ac\ud56d \uc81c\ucd9c \uc131\uacf5:",a.data),alert("\ubb38\uc758\uc0ac\ud56d\uc774 \uc815\uc0c1\uc801\uc73c\ub85c \uc81c\ucd9c\ub418\uc5c8\uc2b5\ub2c8\ub2e4."),s(""),p()}catch(a){console.error("\ubb38\uc758\uc0ac\ud56d \uc81c\ucd9c \uc2e4\ud328:",a),alert("\ubb38\uc758\uc0ac\ud56d \uc81c\ucd9c\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4.")}},className:"customer-support-form",children:[(0,n.jsxs)("div",{className:"form-group",children:[(0,n.jsx)("label",{htmlFor:"question",children:"\ubb38\uc758 \ub0b4\uc6a9:"}),(0,n.jsx)("textarea",{id:"question",value:e,onChange:e=>s(e.target.value),rows:"5",cols:"50",required:!0})]}),(0,n.jsx)("button",{type:"submit",className:"submit-button",children:"\ubb38\uc758\uc0ac\ud56d \uc81c\ucd9c"})]}),(0,n.jsxs)("div",{className:"inquiry-list-container",children:[(0,n.jsx)("h2",{children:"\ub0b4 \ubb38\uc758\uc0ac\ud56d \ubaa9\ub85d"}),(0,n.jsx)("div",{className:"inquiry-list",children:t.map((e=>(0,n.jsxs)("div",{className:"inquiry-item",children:[(0,n.jsxs)("div",{className:"inquiry-item-content",onClick:()=>{return s=e.id,void o((e=>({...e,[s]:!e[s]})));var s},style:{cursor:"pointer"},children:[(0,n.jsxs)("div",{className:"inquiry-item-content-item",children:[(0,n.jsx)("strong",{children:"\ubb38\uc758 \ub0b4\uc6a9:"})," ",e.question]}),(0,n.jsxs)("div",{className:"inquiry-item-content-item",children:[(0,n.jsx)("strong",{children:"\uc791\uc131\uc77c:"})," ",new Date(e.createdAt).toLocaleString()]}),e.response?(0,n.jsx)("div",{className:"inquiry-item-toggle-hint",children:c[e.id]?"\u25b2 \ub2f5\ubcc0 \uc228\uae30\uae30":"\u25bc \ub2f5\ubcc0 \ubcf4\uae30"}):(0,n.jsx)("div",{className:"inquiry-item-toggle-hint",children:"\ub2f5\ubcc0 \ub300\uae30 \uc911"})]}),e.response&&c[e.id]&&(0,n.jsx)("div",{className:"inquiry-item-content-response",children:(0,n.jsxs)("p",{children:[(0,n.jsx)("strong",{children:"\ub2f5\ubcc0:"})," ","string"===typeof e.response?JSON.parse(e.response).response:e.response]})})]},e.id)))})]})]})}}}]);
//# sourceMappingURL=312.963714e0.chunk.js.map